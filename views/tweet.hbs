<form method="POST" action="/tweet">

  <input type="hidden" name="in_reply_to_status_id" value="{{in_reply_to_status_id}}" />
  <input type="hidden" name="imgurl" value="{{imgurl}}" />

  <textarea name="text" id="text" class="form-control" rows="3">{{text}}</textarea>

  <div id="chars_left"><span id="counter">0</span><label>chars left</label></div>

  <img src="{{imgurl}}" />

  <input type="submit" class="btn btn-default" id="submit" value="Tweet" />

</form>

<script>

  var $counter = document.querySelector("#counter");
  var $text = document.querySelector("#text");
  var $form = document.querySelector("form");

  var imgurl = "{{imgurl}}";

  var updateCounter = function() {
    var base = (imgurl.length>0) ? 119 : 140;
    $counter.textContent = base - $text.value.length;
  };

  $text.addEventListener("keyup", updateCounter);
  updateCounter();

  $form.addEventListener("submit", function() {
    console.log("Form submitted!");
  });

</script>
